<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <style>
        body {
            background: radial-gradient(circle, #0a0a0a 0%, #000 100%);
            color: #0f0;
            font-family: 'Courier New', monospace;
            display: flex; flex-direction: column; align-items: center;
            padding: 50px; margin: 0; min-height: 100vh;
        }
        h1 { font-size: 40px; text-shadow: 0 0 15px #0f0; margin-bottom: 30px; border-bottom: 2px solid #050; padding-bottom: 10px; }
        table { width: 95%; max-width: 900px; border-collapse: collapse; background: rgba(0,20,0,0.2); box-shadow: 0 0 30px rgba(0,255,0,0.05); }
        th { border-bottom: 2px solid #0f0; padding: 15px; font-size: 20px; color: #0f0; text-align: center; background: #010; }
        td { border: 1px solid #020; padding: 12px; text-align: center; font-size: 18px; }
        
        .win { color: #0ff; } 
        .draw { color: #ff0; } 
        .loss { color: #f00; }
        .total-row { background: #010; font-weight: bold; border-top: 3px solid #0f0; }

        /* Win % Colors */
        .pct-low { color: #ff4d4d; text-shadow: 0 0 5px #ff4d4d; font-weight: bold; }
        .pct-mid { color: #ffcc00; text-shadow: 0 0 5px #ffcc00; font-weight: bold; }
        .pct-high { color: #00ff88; text-shadow: 0 0 10px #00ff88; font-weight: bold; }
    </style>
</head>
<body>
    <h1>GLOBAL SCOREBOARD</h1>
    <table>
        <tr>
            <th>LEVEL</th>
            <th>WINS</th>
            <th>DRAWS</th>
            <th>LOSSES</th>
            <th>WIN %</th>
        </tr>
        
        <? 
           var totalW = 0, totalD = 0, totalL = 0;
           for (var i = 0; i < data.length; i++) { 
             var w = parseInt(data[i][1]) || 0;
             var d = parseInt(data[i][2]) || 0;
             var l = parseInt(data[i][3]) || 0;
             var totalGames = w + d + l;
             var rawPct = totalGames > 0 ? (w / totalGames) * 100 : 0;
             var winPctText = rawPct.toFixed(1) + "%";
             
             // Pick the color class based on percentage
             var pctClass = rawPct < 33 ? "pct-low" : (rawPct < 67 ? "pct-mid" : "pct-high");
             
             totalW += w; totalD += d; totalL += l;
        ?>
          <tr>
            <td style="color:#fff; font-weight: bold;">LEVEL 0<?= data[i][0] ?></td>
            <td class="win"><?= w ?></td>
            <td class="draw"><?= d ?></td>
            <td class="loss"><?= l ?></td>
            <td class="<?= pctClass ?>"><?= winPctText ?></td>
          </tr>
        <? } ?>
        
        <? 
           var grandTotal = totalW + totalD + totalL;
           var totalRawPct = grandTotal > 0 ? (totalW / grandTotal) * 100 : 0;
           var totalWinPctText = totalRawPct.toFixed(1) + "%";
           var totalPctClass = totalRawPct < 33 ? "pct-low" : (totalRawPct < 67 ? "pct-mid" : "pct-high");
        ?>
        <tr class="total-row">
            <td style="color:#0f0;">TOTAL</td>
            <td class="win"><?= totalW ?></td>
            <td class="draw"><?= totalD ?></td>
            <td class="loss"><?= totalL ?></td>
            <td class="<?= totalPctClass ?>"><?= totalWinPctText ?></td>
        </tr>
    </table>
</body>
</html>
